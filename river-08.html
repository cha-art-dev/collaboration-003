<html>
<head>
  <title>projection</title>
  <script src="p5.min.js"></script>
  <script>

  //=============== DO ALL YOUR WORK HERE =======================


  var posY = window.innerHeight * 4/5;
  var edge = {p1x:0,p1y:posY,p2x:window.innerWidth,p2y:posY};


  function setup() {
    createCanvas(windowWidth, windowHeight); // don't change this
    stroke(0);
    background(255);

    bump(edge);
  }

  function bump(e){
    
    var dx = e.p2x-e.p1x;
    var dy = e.p2y-e.p1y;
    var d = sqrt(sq(dx)+sq(dy));//edge length, distance
    var ang = asin(dy/d);
    var bh = 4*d/15;//bump height

    /// stupid trickery due to flipped axes and trig crap
    if (e.p2x < e.p1x) {
      var bp = {x:e.p1x+dx/2+bh*sin(ang), y:e.p1y+dy/2+bh*cos(ang)};
    }else{
      var bp = {x:e.p1x+dx/2+bh*sin(ang), y:e.p1y+dy/2-bh*cos(ang)};
    }

    var edges = [
      {p1x:e.p1x, p1y:e.p1y, p2x:e.p1x+dx/3, p2y:e.p1y+dy/3},
      {p1x:e.p1x+dx/3, p1y:e.p1y+dy/3, p2x:bp.x, p2y:bp.y},
      {p1x:bp.x, p1y:bp.y, p2x:e.p1x+2*dx/3, p2y:e.p1y+2*dy/3},
      {p1x:e.p1x+2*dx/3, p1y:e.p1y+2*dy/3, p2x:e.p2x, p2y:e.p2y}
    ];

    if (d > 1) {
      for (var i=0; i<edges.length; i++) {
        stroke(0);
        line(edges[i].p1x,edges[i].p1y,edges[i].p2x,edges[i].p2y);
        bump(edges[i]);
      }
    }
  }


  // =============== STOP WORKING HERE ==========================

  </script>
  <style>
    body { padding: 0; margin: 5% 0 0; background-color: #333;}
    canvas { margin: 0; }
  </style>
</head>
<body>
</body>
</html>
